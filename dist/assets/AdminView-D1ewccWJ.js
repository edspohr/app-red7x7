import{_ as N,i as V,o as d,w as C,c,a as w,d as e,g as _,T as G,j as F,k as v,l as D,m as y,v as $,p as I,q as U,u as S,e as A,F as h,r as E,t as p,n as j,b as M,s as L,f as q,h as R}from"./index-C4OItOmc.js";const P={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},z={key:0,class:"relative bg-white rounded-xl shadow-xl w-full max-w-2xl mx-4 my-8"},Q={__name:"BaseModal",props:{isOpen:Boolean},emits:["close"],setup(b,{emit:i}){const u=i;return(l,t)=>(d(),V(G,{name:"fade"},{default:C(()=>[b.isOpen?(d(),c("div",P,[e("div",{onClick:t[0]||(t[0]=a=>u("close")),class:"absolute inset-0 bg-black bg-opacity-60"}),_(G,{name:"zoom"},{default:C(()=>[b.isOpen?(d(),c("div",z,[F(l.$slots,"default",{},void 0,!0)])):w("",!0)]),_:3})])):w("",!0)]),_:3}))}},O=N(Q,[["__scopeId","data-v-0d8f1096"]]),W={class:"space-y-4"},H={class:"block"},J={class:"block"},K={class:"block"},X={class:"block"},Y={class:"flex justify-end gap-3 pt-6"},Z={__name:"UserEditorForm",props:{user:Object},emits:["save","cancel"],setup(b,{emit:i}){const u=b,l=i,t=v({nombre:"",email:"",sector:"",estado:"Activo"});D(()=>u.user,m=>{m&&(t.value={nombre:m.nombre||"",email:m.email||"",sector:m.sector||"",estado:m.estado||"Activo"})},{immediate:!0});function a(){l("save",t.value)}return(m,s)=>(d(),c("form",{onSubmit:U(a,["prevent"]),class:"p-6"},[s[11]||(s[11]=e("h3",{class:"text-xl font-bold mb-4"},"Editar Socio",-1)),e("div",W,[e("label",H,[s[5]||(s[5]=e("span",{class:"text-sm font-medium text-gray-700"},"Nombre Completo",-1)),y(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.value.nombre=o),class:"w-full mt-1 p-2 border rounded-lg bg-gray-50",required:""},null,512),[[$,t.value.nombre]])]),e("label",J,[s[6]||(s[6]=e("span",{class:"text-sm font-medium text-gray-700"},"Email",-1)),y(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.email=o),type:"email",class:"w-full mt-1 p-2 border rounded-lg bg-gray-50",required:""},null,512),[[$,t.value.email]])]),e("label",K,[s[7]||(s[7]=e("span",{class:"text-sm font-medium text-gray-700"},"Sector",-1)),y(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>t.value.sector=o),class:"w-full mt-1 p-2 border rounded-lg bg-gray-50"},null,512),[[$,t.value.sector]])]),e("label",X,[s[9]||(s[9]=e("span",{class:"text-sm font-medium text-gray-700"},"Estado",-1)),y(e("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>t.value.estado=o),class:"w-full mt-1 p-2 border rounded-lg bg-gray-50"},[...s[8]||(s[8]=[e("option",null,"Activo",-1),e("option",null,"Pendiente",-1),e("option",null,"Inactivo",-1)])],512),[[I,t.value.estado]])])]),e("div",Y,[e("button",{onClick:s[4]||(s[4]=o=>m.$emit("cancel")),type:"button",class:"px-4 py-2 rounded-lg border bg-gray-100 hover:bg-gray-200 font-semibold"}," Cancelar "),s[10]||(s[10]=e("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold"}," Guardar Cambios ",-1))])],32))}},ee={class:"bg-white rounded-xl shadow-md p-6"},te={class:"overflow-x-auto"},se={class:"min-w-full text-sm"},oe={class:"p-3 font-medium"},ne={class:"p-3 text-xs text-gray-600"},le={class:"p-3"},ae={class:"p-3"},re={class:"p-3 space-x-4 text-right"},ie=["onClick"],de=["onClick"],ue={__name:"AdminUserList",setup(b){const i=S(),u=v(!1),l=v(null);function t(o){l.value=o,u.value=!0}function a(){u.value=!1,l.value=null}function m(o){const r={...o,id:l.value.id};i.updateUser(r),a()}const s=A(()=>i.state.users.filter(o=>o.rol!=="Administrador"));return(o,r)=>(d(),c(h,null,[e("div",ee,[r[1]||(r[1]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4"},"Gestionar Socios",-1)),e("div",te,[e("table",se,[r[0]||(r[0]=e("thead",{class:"text-xs text-gray-800 uppercase bg-gray-50"},[e("tr",null,[e("th",{class:"p-3"},"Nombre"),e("th",{class:"p-3"},"Email"),e("th",{class:"p-3"},"Sector"),e("th",{class:"p-3"},"Estado"),e("th",{class:"p-3 text-right"},"Acciones")])],-1)),e("tbody",null,[(d(!0),c(h,null,E(s.value,n=>(d(),c("tr",{key:n.id,class:"border-b hover:bg-gray-50"},[e("td",oe,p(n.nombre),1),e("td",ne,p(n.email),1),e("td",le,p(n.sector),1),e("td",ae,[e("span",{class:j(["px-2 py-1 text-xs rounded-full",{"bg-green-100 text-green-800":n.estado==="Activo","bg-yellow-100 text-yellow-800":n.estado==="Pendiente","bg-red-100 text-red-800":n.estado==="Inactivo"}])},p(n.estado),3)]),e("td",re,[e("button",{onClick:g=>t(n),class:"text-blue-600 hover:underline"}," Editar ",8,ie),e("button",{onClick:g=>M(i).toggleUserState(n.id),class:"text-gray-600 hover:underline"},p(n.estado==="Activo"?"Desactivar":"Activar"),9,de)])]))),128))])])])]),_(O,{isOpen:u.value,onClose:a},{default:C(()=>[l.value?(d(),V(Z,{key:0,user:l.value,onSave:m,onCancel:a},null,8,["user"])):w("",!0)]),_:1},8,["isOpen"])],64))}},ce={class:"text-xl font-bold mb-4"},me={class:"space-y-4"},pe={class:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 cursor-pointer"},be={class:"flex justify-end gap-3 pt-6"},ve={type:"submit",class:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold"},ge={__name:"BoardEditorForm",props:{message:Object},emits:["save","cancel"],setup(b,{emit:i}){const u=b,l=i,t=v(""),a=v(""),m=v(!1);D(()=>u.message,o=>{o?(t.value=o.title||"",a.value=o.body||"",m.value=o.pinned||!1):(t.value="",a.value="",m.value=!1)},{immediate:!0});function s(){l("save",{title:t.value,body:a.value,pinned:m.value})}return(o,r)=>(d(),c("form",{onSubmit:U(s,["prevent"]),class:"p-6"},[e("h3",ce,p(b.message?"Editar":"Nuevo")+" Anuncio",1),e("div",me,[y(e("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.value=n),placeholder:"T√≠tulo del anuncio",class:"w-full p-2 border rounded-lg bg-gray-50",required:""},null,512),[[$,t.value]]),y(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=n=>a.value=n),placeholder:"Contenido del anuncio...",rows:"5",class:"w-full p-2 border rounded-lg bg-gray-50",required:""},null,512),[[$,a.value]]),e("label",pe,[y(e("input",{type:"checkbox","onUpdate:modelValue":r[2]||(r[2]=n=>m.value=n),class:"h-5 w-5 text-blue-600"},null,512),[[L,m.value]]),r[4]||(r[4]=e("span",{class:"font-medium"},"Fijar este anuncio",-1))])]),e("div",be,[e("button",{onClick:r[3]||(r[3]=n=>o.$emit("cancel")),type:"button",class:"px-4 py-2 rounded-lg border bg-gray-100 hover:bg-gray-200 font-semibold"}," Cancelar "),e("button",ve,p(b.message?"Guardar Cambios":"Publicar"),1)])],32))}},xe={class:"bg-white rounded-xl shadow-md p-6 mt-6"},fe={class:"flex justify-between items-center mb-4"},_e={class:"space-y-4"},ye={class:"font-semibold"},he={key:0},$e={class:"text-sm text-gray-700 mt-1"},we={class:"flex gap-4 text-sm flex-shrink-0 ml-4"},ke=["onClick"],Ce=["onClick"],Se=["onClick"],Ae={__name:"AdminBoard",setup(b){const i=S(),u=v(!1),l=v(null);function t(o=null){l.value=o,u.value=!0}function a(){u.value=!1,l.value=null}function m(o){const r={...o};l.value&&(r.id=l.value.id),i.saveBoardMessage(r),a()}const s=A(()=>[...i.state.boardMessages].sort((o,r)=>r.pinned-o.pinned||r.createdAt-o.createdAt));return(o,r)=>(d(),c(h,null,[e("div",xe,[e("div",fe,[r[1]||(r[1]=e("h3",{class:"text-xl font-bold text-gray-800"},"Gestionar Anuncios",-1)),e("button",{onClick:r[0]||(r[0]=n=>t()),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg"}," + Nuevo Anuncio ")]),e("div",_e,[(d(!0),c(h,null,E(s.value,n=>(d(),c("div",{key:n.id,class:j(["p-4 border rounded-lg flex justify-between items-start",n.pinned?"bg-yellow-50 border-yellow-300":""])},[e("div",null,[e("div",ye,[n.pinned?(d(),c("span",he,"üìå ")):w("",!0),q(p(n.title),1)]),e("div",$e,p(n.body),1)]),e("div",we,[e("button",{onClick:g=>t(n),class:"text-blue-600 hover:underline"},"Editar",8,ke),e("button",{onClick:g=>M(i).togglePinBoardMessage(n.id),class:"text-gray-700 hover:underline"},p(n.pinned?"Quitar pin":"Fijar"),9,Ce),e("button",{onClick:g=>M(i).deleteBoardMessage(n.id),class:"text-red-600 hover:underline"}," Eliminar ",8,Se)])],2))),128))])]),_(O,{isOpen:u.value,onClose:a},{default:C(()=>[_(ge,{message:l.value,onSave:m,onCancel:a},null,8,["message"])]),_:1},8,["isOpen"])],64))}},Ee={class:"bg-white rounded-xl shadow-md p-6 mt-6"},Me={class:"space-y-3"},je={class:"font-semibold text-gray-800"},Oe={class:"text-xs text-gray-500"},Be=["onClick"],Ge={key:0,class:"p-6"},Ve={class:"text-sm text-gray-600 mb-4"},De={key:0,class:"my-2 text-center text-gray-600"},Ue={class:"flex justify-between items-center mt-4"},Te=["disabled"],Ne={__name:"AdminMeetings",setup(b){const i=S(),u=v(!1),l=v(null),t=v(""),a=v(!1);function m(g){l.value=g,t.value=g.resumen||"",u.value=!0}function s(){u.value=!1,l.value=null,t.value=""}function o(){i.updateMeetingSummary(l.value.id,t.value),s()}async function r(){a.value=!0;const x=l.value.attendees.map(k=>i.state.users.find(T=>T.id===k)).filter(Boolean).map(k=>`- ${k.nombre}, ${k.rol} del sector ${k.sector}.`).join(`
`),f=`Act√∫a como un asistente ejecutivo. Genera un resumen conciso y profesional para la reuni√≥n "${l.value.nombre}" con los asistentes:
${x}
Genera el resumen en un p√°rrafo.`,B=await i.callGemini(f);t.value=B,a.value=!1}const n=A(()=>[...i.state.meetings].sort((g,x)=>new Date(x.fecha)-new Date(g.fecha)));return(g,x)=>(d(),c(h,null,[e("div",Ee,[x[1]||(x[1]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4"},"Gestionar Reuniones",-1)),e("div",Me,[(d(!0),c(h,null,E(n.value,f=>(d(),c("div",{key:f.id,class:"p-4 border rounded-lg flex justify-between items-center"},[e("div",null,[e("div",je,p(f.nombre),1),e("div",Oe," Fecha: "+p(new Date(f.fecha).toLocaleDateString("es-CL")),1)]),e("button",{onClick:B=>m(f),class:j(["text-white px-4 py-2 rounded-lg text-sm font-semibold flex-shrink-0",f.resumen?"bg-green-600 hover:bg-green-700":"bg-gradient-to-r from-purple-500 to-indigo-600 hover:opacity-90"])},p(f.resumen?"Editar Resumen":"‚ú® Generar Resumen"),11,Be)]))),128))])]),_(O,{isOpen:u.value,onClose:s},{default:C(()=>[l.value?(d(),c("div",Ge,[x[2]||(x[2]=e("h3",{class:"text-xl font-bold mb-2"},"Editor de Resumen",-1)),e("p",Ve,p(l.value.nombre),1),y(e("textarea",{"onUpdate:modelValue":x[0]||(x[0]=f=>t.value=f),rows:"10",class:"w-full p-2 border rounded-lg bg-gray-50",placeholder:"Genera un resumen con IA o escribe uno aqu√≠..."},null,512),[[$,t.value]]),a.value?(d(),c("div",De,"Generando resumen...")):w("",!0),e("div",Ue,[e("button",{onClick:r,disabled:a.value,class:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:opacity-90 disabled:opacity-50 text-white px-3 py-2 rounded-lg text-sm font-semibold"}," ‚ú® Generar con IA ",8,Te),e("div",null,[e("button",{onClick:s,class:"px-4 py-2 rounded-lg border bg-gray-100 hover:bg-gray-200 font-semibold"}," Cancelar "),e("button",{onClick:o,class:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold ml-2"}," Guardar ")])])])):w("",!0)]),_:1},8,["isOpen"])],64))}},Fe={class:"mt-6"},Ie={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Le=["src"],qe={class:"flex-grow"},Re={class:"font-bold text-lg text-gray-900"},Pe={class:"text-xs text-gray-500 uppercase font-semibold"},ze={class:"text-sm text-blue-600 font-semibold mt-1"},Qe={__name:"AdminDirectory",setup(b){const i=S(),u=A(()=>i.state.users.filter(l=>l.rol!=="Administrador"));return(l,t)=>(d(),c("div",Fe,[t[0]||(t[0]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4"},"Directorio de Socios",-1)),e("div",Ie,[(d(!0),c(h,null,E(u.value,a=>(d(),c("div",{key:a.id,class:"p-4 border rounded-xl bg-white shadow-md flex items-center gap-4"},[e("img",{src:a.avatar,class:"w-20 h-20 rounded-full object-cover flex-shrink-0 border-2 border-gray-200"},null,8,Le),e("div",qe,[e("div",Re,p(a.nombre),1),e("div",Pe,p(a.rol),1),e("div",ze,p(a.sector),1)])]))),128))])]))}},We={class:"bg-gray-100 min-h-screen"},He={class:"container mx-auto p-6"},Ke={__name:"AdminView",setup(b){const i=S(),u=R();function l(){i.logout(),u.push("/")}return(t,a)=>(d(),c("div",We,[e("header",{class:"bg-white shadow-md"},[e("nav",{class:"container mx-auto px-6 py-3 flex justify-between items-center"},[a[0]||(a[0]=e("h1",{class:"text-xl font-bold text-red-600"},"Panel de Administrador",-1)),e("button",{onClick:l,class:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg"}," Cerrar Sesi√≥n ")])]),e("main",He,[_(ue),_(Ae),_(Ne),_(Qe)])]))}};export{Ke as default};
